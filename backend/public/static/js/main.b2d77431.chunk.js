(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(56)},31:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),s=a.n(r),c=a(2),l=a(3),i=a(5),m=a(4),u=a(6),p=a(58),d=a(60),h=a(59),g=(a(31),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header-container"},o.a.createElement("div",{className:"header__mainHeading-container"},o.a.createElement("h2",{className:"header__mainHeading"},"WATCH YOUR TONE"),o.a.createElement("h2",{className:"header__mainHeading header__mainHeading--shadow"},"WATCH YOUR TONE")))}}]),t}(o.a.Component)),f=a(8),b=a.n(f),v=a(18),E=a.n(v),y="https://watchyourtone.herokuapp.com",S=function(){return[new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1)]},C=function(){return[new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1)]},N={noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:.05,release:.2}},w={frequency:200,envelope:{attack:.001,decay:.05,release:.05},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},O=["C5","B4","A4","G4","F4","E4","D4","C4"],k=140,I="triangle",j="untitled",F="unknown",T=["./assets/kick-100-inv.png","./assets/snare-100-inv.png","./assets/hihat-100-inv.png"],A=["6BFFE9","74F5EA","7DECEB","86E3ED","8FDAEE","98D1F0","A1C8F1","AABFF2","B3B5F4","BCACF5","C5A3F7","CE9AF8","D791F9","E088FB","E97FFC","F276FE"],_=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("tr",{className:"synthKey-row"},o.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--synth"},O[this.props.synthKeyIndex].slice(0,1)),this.props.bars.map(function(t,a){return o.a.createElement("td",{className:e.props.synthKeyMatrix[e.props.synthKeyIndex][a]?"noteBox noteBox--active":"noteBox",key:a,onClick:function(){return e.props.handleNoteClick(a)}})}))}}]),t}(o.a.Component),B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).passUpNoteClick=function(e,t){a.props.handleNoteClick(e,t)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.synth,n=t.activeBar;return o.a.createElement("div",{className:"synth-container"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--bars"},o.a.createElement("img",{src:"./assets/note-100-inv.png",className:"drumIcon",alt:"note"})),a[0].map(function(e,t){return o.a.createElement("th",{key:t,style:{backgroundColor:t===n?"#".concat(A[t]):"darkgrey"},className:t===n?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),o.a.createElement("tbody",null,a.map(function(t,n){return o.a.createElement(_,{key:n,synthKeyIndex:n,bars:a[n],synthKeyMatrix:a,handleNoteClick:function(t){return e.passUpNoteClick(n,t)}})}))))}}]),t}(o.a.Component),x=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("tr",{className:"seqInstrument-row"},o.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--drums"},o.a.createElement("img",{src:T[this.props.drumIndex],className:"drumIcon",alt:"drum"})),this.props.bars.map(function(t,a){return o.a.createElement("td",{className:e.props.drumMatrix[e.props.drumIndex][a]?"beatBox beatBox--active":"beatBox",key:a,onClick:function(){return e.props.handleDrumClick(a)}})}))}}]),t}(o.a.Component),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).passUpBeatClick=function(e,t){a.props.handleDrumClick(e,t)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.drums,n=t.activeBar;return o.a.createElement("div",{className:"drums-container"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"tableRowExplainer tableRowExplainer--bars"}),a[0].map(function(e,t){return o.a.createElement("th",{key:t,style:{backgroundColor:t===n?"#".concat(A[t]):"darkgrey"},className:t===n?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),o.a.createElement("tbody",null,a.map(function(t,n){return o.a.createElement(x,{key:n,drumIndex:n,bars:a[n],drumMatrix:a,handleDrumClick:function(t){return e.passUpBeatClick(n,t)}})}))))}}]),t}(o.a.Component),W=(a(33),a(35),a(37),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).handleBpmChange=function(e){a.props.changeBpm(e.target.value)},a.handleWaveChange=function(e){a.props.changeWaveForm(e.target.value)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.bpm,a=e.synthWaveForm;return o.a.createElement("section",{className:"settings-container"},o.a.createElement("h2",{className:"composerPage-headline"},"SETTINGS"),o.a.createElement("div",{className:"settings-container__bpm"},o.a.createElement("h3",{className:"section-heading"},"TEMPO: ",o.a.createElement("span",{className:"highlighted"},this.props.bpm)," BPM")),o.a.createElement("div",{className:"meters"},o.a.createElement("input",{name:"bpm",type:"range",min:"40",max:"300",value:t,onChange:this.handleBpmChange})),o.a.createElement("div",{className:"waveFormSetting-container"},o.a.createElement("div",{className:"settings-container__waveform"},o.a.createElement("h3",{className:"section-heading section-heading--waveform"},"WAVEFORM: ",o.a.createElement("span",{className:"highlighted"},this.props.synthWaveForm.toUpperCase()))),o.a.createElement("label",{className:"radio-button-container",htmlFor:"triangle"},o.a.createElement("img",{src:"./assets/wf-triangle-small.png",className:"waveform-image",alt:"triangle-waveform"}),o.a.createElement("input",{type:"radio",id:"triangle",name:"triangle",value:"triangle",onChange:this.handleWaveChange,checked:"triangle"===a}),o.a.createElement("span",{className:"custom-radio-button"})),o.a.createElement("br",null),o.a.createElement("label",{className:"radio-button-container",htmlFor:"square"},o.a.createElement("img",{src:"./assets/wf-square-small.png",className:"waveform-image",alt:"square-waveform"}),o.a.createElement("input",{type:"radio",id:"square",name:"square",value:"square",onChange:this.handleWaveChange,checked:"square"===a}),o.a.createElement("span",{className:"custom-radio-button"})),o.a.createElement("br",null),o.a.createElement("label",{className:"radio-button-container",htmlFor:"sawtooth"},o.a.createElement("img",{src:"./assets/wf-sawtooth-small.png",className:"waveform-image",alt:"sawtooth-waveform"}),o.a.createElement("input",{type:"radio",id:"sawtooth",name:"sawtooth",value:"sawtooth",onChange:this.handleWaveChange,checked:"sawtooth"===a}),o.a.createElement("span",{className:"custom-radio-button"})),o.a.createElement("br",null),o.a.createElement("label",{className:"radio-button-container",htmlFor:"sine"},o.a.createElement("img",{src:"./assets/wf-sine-small.png",className:"waveform-image",alt:"sine-waveform"}),o.a.createElement("input",{type:"radio",id:"sine",name:"sine",value:"sine",onChange:this.handleWaveChange,checked:"sine"===a}),o.a.createElement("span",{className:"custom-radio-button"})),o.a.createElement("br",null)))}}]),t}(o.a.Component)),D=(a(39),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={synth:S(),drums:C(),activeBar:0,resetTransport:!1,bpm:140,synthWaveForm:"triangle",loadedSongTitle:j,loadedSongComposer:F},a.checkForActiveSession=function(){try{sessionStorage&&sessionStorage.getItem("drums")&&a.setState({drums:JSON.parse(sessionStorage.getItem("drums")),synth:JSON.parse(sessionStorage.getItem("synth")),bpm:sessionStorage.getItem("bpm"),synthWaveForm:sessionStorage.getItem("waveform"),loadedSongTitle:sessionStorage.getItem("loadedSongTitle"),loadedSongComposer:sessionStorage.getItem("loadedSongComposer")},function(){return a.handleBpmChange(a.state.bpm)})}catch(e){console.log(e)}},a.startPlaying=function(){E()(b.a.context,"#playButton").then(function(){b.a.Transport.start("+0.2")})},a.stopPlaying=function(){b.a.Transport.stop()},a.rewindPlaying=function(){a.setState({resetTransport:!0,activeBar:0})},a.handleDrumClick=function(e,t){var n=a.state.drums;n[e][t]=!a.state.drums[e][t],a.setState({drums:n})},a.handleNoteClick=function(e,t){var n=a.state.synth;n[e][t]=!a.state.synth[e][t],a.setState({synth:n})},a.handleBpmChange=function(e){a.setState({bpm:e},function(){b.a.Transport.bpm.rampTo(a.state.bpm,.2)})},a.changeWaveForm=function(e){a.setState({synthWaveForm:e})},a.clearMatrix=function(){a.setState({synth:S(),drums:C(),bpm:k,synthWaveForm:I,loadedSongTitle:j,loadedSongComposer:F},function(){return a.handleBpmChange(a.state.bpm)}),sessionStorage.removeItem("drums"),sessionStorage.removeItem("synth"),sessionStorage.removeItem("bpm"),sessionStorage.removeItem("waveform"),sessionStorage.removeItem("loadedSongTitle"),sessionStorage.removeItem("loadedSongComposer")},a.soundGenerator=function(){b.a.Transport.bpm.value=a.state.bpm,b.a.context.latencyHint="fastest";var e=new b.a.Freeverb(.05,15e3).toMaster(),t=new b.a.Gain(.6);t.connect(e);var n=[new b.a.MembraneSynth,new b.a.NoiseSynth(N),new b.a.MetalSynth(w)];n.forEach(function(e){return e.connect(t)});var o=[];a.state.synth.forEach(function(e,t){return o.push(new b.a.Synth)}),o.forEach(function(e){return e.connect(t)});var r=0;b.a.Transport.scheduleRepeat(function(e){a.state.resetTransport&&(r=0,a.setState({resetTransport:!1,activeBar:0}));var t=r%16;if(a.setState({activeBar:t}),o[0].oscillator.type!==a.state.synthWaveForm){var s=o.map(function(e){return new Promise(function(t){e.oscillator.type=a.state.synthWaveForm,t()})});Promise.all(s).then()}o.forEach(function(n,o){a.state.synth[o][t]&&n.triggerAttackRelease(O[o],"8n",e)}),n.forEach(function(o,r){if(a.state.drums[r][t])switch(r){default:n[r].triggerAttackRelease("C1","8n",e);break;case 1:n[r].triggerAttackRelease("16n");break;case 2:n[r].triggerAttackRelease("16n",e,.6)}}),r++},"8n")},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("* Optimized for latest version of Chrome Desktop *"),console.log("Adam Heldring \u2013\xa0Final Project @ Technigo Bootcamp"),console.log("wyt@adamheldring.com"),b.a.Transport.cancel(),this.soundGenerator(),this.checkForActiveSession()}},{key:"componentDidUpdate",value:function(e,t){this.props.newSongLoaded&&(this.checkForActiveSession(),this.props.resetSongLoader()),this.state!==t&&(sessionStorage.setItem("drums",JSON.stringify(this.state.drums)),sessionStorage.setItem("synth",JSON.stringify(this.state.synth)),sessionStorage.setItem("bpm",this.state.bpm),sessionStorage.setItem("waveform",this.state.synthWaveForm),sessionStorage.setItem("loadedSongTitle",this.state.loadedSongTitle),sessionStorage.setItem("loadedSongComposer",this.state.loadedSongComposer))}},{key:"componentWillUnmount",value:function(){b.a.Transport.stop()}},{key:"render",value:function(){var e=this,t=this.state,a=t.synth,n=t.drums,r=t.activeBar,s=t.bpm,c=t.synthWaveForm,l=t.loadedSongTitle,i=t.loadedSongComposer;return o.a.createElement("div",{className:"musicMaker-wrapper"},o.a.createElement("section",{className:"sequenser-container"},o.a.createElement("h1",{className:"composerPage-headline"},"COMPOSE"),"untitled"!==this.state.loadedSongTitle?o.a.createElement("h3",{className:"section-heading"},"SONG:"," ",o.a.createElement("span",{className:"highlighted"},'"'.concat(l.toUpperCase(),'" '))," ","BY:"," ",o.a.createElement("span",{className:"highlighted"},i.toUpperCase())):o.a.createElement("h3",{className:"section-heading"},o.a.createElement("span",{className:"highlighted"},"NEW SONG")),o.a.createElement(B,{synth:a,activeBar:r,handleNoteClick:function(t,a){return e.handleNoteClick(t,a)}}),o.a.createElement(L,{drums:n,activeBar:r,handleDrumClick:function(t,a){return e.handleDrumClick(t,a)}}),o.a.createElement("div",{className:"transportControls"},o.a.createElement("button",{onClick:this.startPlaying,className:"transportControl transportControl__button",id:"playButton"},o.a.createElement("span",{className:"transportControl__symbol"},o.a.createElement("i",{className:"fas fa-play"})),o.a.createElement("br",null),"PLAY"),o.a.createElement("button",{onClick:this.stopPlaying,className:"transportControl transportControl__button"},o.a.createElement("span",{className:"transportControl__symbol transportControl__symbol--stop"},o.a.createElement("i",{className:"fas fa-stop"})),o.a.createElement("br",null),"STOP"),o.a.createElement("button",{onClick:this.rewindPlaying,className:"transportControl transportControl__button"},o.a.createElement("span",{className:"transportControl__symbol"},o.a.createElement("i",{className:"fas fa-backward"})),o.a.createElement("br",null),"REWIND"),o.a.createElement("button",{onClick:this.clearMatrix,className:"transportControl transportControl__button"},o.a.createElement("span",{className:"transportControl__symbol"},o.a.createElement("i",{className:"fas fa-eject"})),o.a.createElement("br",null),"CLEAR"))),o.a.createElement(W,{bpm:s,changeBpm:function(t){return e.handleBpmChange(t)},synthWaveForm:c,changeWaveForm:function(t){return e.changeWaveForm(t)},loadedSongTitle:l,loadedSongComposer:i}))}}]),t}(o.a.Component)),P=a(14),R=(a(41),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={songTitle:"",composer:"",songList:[],songToLoad:"",loadedSong:""},a.handleFormChange=function(e){"text"===e.target.type?a.setState(Object(P.a)({},e.target.name,e.target.value.toUpperCase())):a.setState(Object(P.a)({},e.target.name,e.target.value))},a.clearFields=function(){a.setState({songTitle:"",composer:""})},a.submitSave=function(e){e.preventDefault();var t=a.state,n=t.songTitle,o=t.composer,r={songId:Date.now(),createdDate:new Date,songTitle:n,composer:o,drums:sessionStorage.getItem("drums"),synth:sessionStorage.getItem("synth"),bpm:sessionStorage.getItem("bpm"),waveform:sessionStorage.getItem("waveform")};fetch("".concat(y,"/songs/"),{headers:{"Content-Type":"application/json"},method:"Post",body:JSON.stringify(r)}).then(function(e){console.log("Request success: ",e),sessionStorage.setItem("loadedSongTitle",n),sessionStorage.setItem("loadedSongComposer",o),a.loadSongList(),a.props.loadNewSong(!0),a.clearFields()}).catch(function(e){console.log("Request failure: ",e),alert(e)})},a.submitLoad=function(e){e.preventDefault();var t=a.state.songToLoad;t?fetch("".concat(y,"/songs/").concat(t)).then(function(e){return e.json()}).then(function(e){a.setState({loadedSong:e},function(){a.loadSongToStorage()})}):console.log("Choose a song to load...")},a.loadSongToStorage=function(){var e=a.state.loadedSong;sessionStorage.setItem("drums",e.drums),sessionStorage.setItem("synth",e.synth),sessionStorage.setItem("bpm",e.bpm),sessionStorage.setItem("waveform",e.waveform),sessionStorage.setItem("loadedSongTitle",e.songTitle),sessionStorage.setItem("loadedSongComposer",e.composer),a.props.loadNewSong(!0)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadSongList()}},{key:"loadSongList",value:function(){var e=this;fetch("".concat(y,"/songs/")).then(function(e){return e.json()}).then(function(t){e.setState({songList:t})})}},{key:"render",value:function(){var e=this.state,t=e.songTitle,a=e.composer,n=e.songList;return o.a.createElement("div",{className:"page-wrapper page-wrapper--saveLoad"},o.a.createElement("div",{className:"saveForm-container"},o.a.createElement("h1",{className:"composerPage-headline composerPage-headline--saveLoad"},"SAVE:"),o.a.createElement("form",{id:"postingForm",className:"postingForm",onSubmit:this.submitSave},o.a.createElement("input",{className:"formInput formInput__field",value:t,type:"text",placeholder:"SONG TITLE",name:"songTitle",required:!0,onChange:this.handleFormChange}),o.a.createElement("input",{className:"formInput formInput__field",value:a,type:"text",placeholder:"COMPOSER NAME",name:"composer",required:!0,onChange:this.handleFormChange}),o.a.createElement("input",{className:"submitButton formInput__button formInput__button--save",type:"submit",value:"SAVE"}))),o.a.createElement("div",{className:"loadForm-container"},o.a.createElement("h1",{className:"composerPage-headline composerPage-headline--saveLoad"},"LOAD:"),o.a.createElement("form",{id:"loadingForm",className:"loadingForm",onSubmit:this.submitLoad},o.a.createElement("select",{name:"songToLoad",className:"formInput formInput formInput__select",onChange:this.handleFormChange,size:"5"},n.sort(function(e,t){return e.songId<t.songId?1:t.songId<e.songId?-1:0}).map(function(e,t){return o.a.createElement("option",{key:t,value:e.songId},"".concat(e.songTitle.toUpperCase()," (").concat(e.composer.toUpperCase(),")"))})),o.a.createElement("input",{className:"submitButton formInput__button formInput__button--load",type:"submit",value:"LOAD"})),"\u2013\xa0"))}}]),t}(o.a.Component)),M=(a(43),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={newSongLoaded:!1},a.loadNewSong=function(e){a.setState({newSongLoaded:e})},a.resetSongLoader=function(){a.setState({newSongLoaded:!1})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"page-wrapper page-wrapper--composerPage"},o.a.createElement(D,{newSongLoaded:this.state.newSongLoaded,resetSongLoader:this.resetSongLoader}),o.a.createElement(R,{loadNewSong:function(t){return e.loadNewSong(t)}}))}}]),t}(o.a.Component)),q=(a(45),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper page-wrapper--404"},o.a.createElement("h1",null,"404"))}}]),t}(o.a.Component)),U=(a(47),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(g,null),o.a.createElement(d.a,null,o.a.createElement(h.a,{exact:!0,path:"/",component:M}),o.a.createElement(h.a,{component:q}))))}}]),t}(o.a.Component));a(54);s.a.render(o.a.createElement(U,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.b2d77431.chunk.js.map