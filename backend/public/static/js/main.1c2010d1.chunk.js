(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(49)},32:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),c=a.n(r),s=a(3),l=a(4),i=a(6),u=a(5),m=a(7),p=a(51),d=a(53),h=a(52),g=a(50),f=(a(32),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header-container"},o.a.createElement("h2",null,"WATCH YOUR TONE"),o.a.createElement("nav",{className:"nav-container"},o.a.createElement(g.a,{to:"/",className:"menuItem"},"COMPOSE"),o.a.createElement(g.a,{to:"/settings/",className:"menuItem"},"SETTINGS"),o.a.createElement(g.a,{to:"/saveload/",className:"menuItem"},"SAVE/LOAD")))}}]),t}(o.a.Component)),b=a(11),E=a.n(b),v=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("tr",{className:"seqInstrument-row"},this.props.bars.map(function(t,a){return o.a.createElement("td",{className:e.props.drumMatrix[e.props.drumIndex][a]?"noteBox noteBox--active":"noteBox",key:a,onClick:function(){return e.props.handleDrumClick(a)}})}))}}]),t}(o.a.Component),y=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("tr",{className:"synthKey-row"},this.props.bars.map(function(t,a){return o.a.createElement("td",{className:e.props.synthKeyMatrix[e.props.synthKeyIndex][a]?"noteBox noteBox--active":"noteBox",key:a,onClick:function(){return e.props.handleNoteClick(a)}})}))}}]),t}(o.a.Component),O=(a(36),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={synth:[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]],drums:[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]],activeBar:0,bpm:120},a.checkForActiveSession=function(){sessionStorage.getItem("drums")&&a.setState({drums:JSON.parse(sessionStorage.getItem("drums"))})},a.startPlaying=function(){console.log("PLAYING"),E.a.Transport.start("+0.1"),a.setState({playing:!0})},a.stopPlaying=function(){console.log("STOPPED"),E.a.Transport.stop(),a.setState({playing:!1})},a.handleDrumClick=function(e,t){var n=a.state.drums;n[e][t]=!a.state.drums[e][t],a.setState({drums:n},console.table(a.state.drums))},a.handleNoteClick=function(e,t){var n=a.state.synth;n[e][t]=!a.state.synth[e][t],a.setState({synth:n},console.table(a.state.synth))},a.handleBpmChange=function(e){a.setState({bpm:e.target.value},function(){console.log("STATE bpm: ",a.state.bpm),console.log("TRANSPORT bpm: ",E.a.Transport.bpm.value),E.a.Transport.bpm.value=a.state.bpm})},a.drumsGenerator=function(){var e=[new E.a.MembraneSynth,new E.a.PluckSynth({attackNoise:2,dampening:4e3,resonance:.45}),new E.a.MetalSynth({frequency:200,envelope:{attack:.001,decay:.05,release:.05},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5})];e[0].oscillator.type="sine";var t=new E.a.Gain(.6);t.toMaster(),e.forEach(function(e){return e.connect(t)});var n=0;E.a.Transport.bpm.value=a.state.bpm,E.a.Transport.scheduleRepeat(function(t){var o=n%16;a.setState({activeBar:o});for(var r=["C1","C2","C4"],c=0;c<a.state.drums.length;c++)if(a.state.drums[c][o])switch(c){case 1:e[c].triggerAttackRelease("C2","16n",t);break;case 2:e[c].triggerAttackRelease("16n",t,.6);break;default:e[c].triggerAttackRelease(r[c],"8n",t)}n++},"8n")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){E.a.Transport.cancel(),this.drumsGenerator(),this.checkForActiveSession()}},{key:"componentWillUnmount",value:function(){E.a.Transport.stop(),sessionStorage.setItem("drums",JSON.stringify(this.state.drums))}},{key:"render",value:function(){var e=this,t=this.state,a=t.synth,n=t.drums,r=t.activeBar,c=t.bpm;return o.a.createElement("div",{className:"sequenser-container"},o.a.createElement("h3",null,"SEQUENSER"),o.a.createElement("div",{className:"synth-container"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,a[0].map(function(e,t){return o.a.createElement("th",{key:t,className:t===r?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),o.a.createElement("tbody",null,a.map(function(t,n){return o.a.createElement(y,{key:n,synthKeyIndex:n,bars:a[n],synthKeyMatrix:a,handleNoteClick:function(t){return e.handleNoteClick(n,t)}})})))),o.a.createElement("div",{className:"drums-container"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,n[0].map(function(e,t){return o.a.createElement("th",{key:t,className:t===r?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),o.a.createElement("tbody",null,n.map(function(t,a){return o.a.createElement(v,{key:a,drumIndex:a,bars:n[a],drumMatrix:n,handleDrumClick:function(t){return e.handleDrumClick(a,t)}})})))),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.startPlaying},"PLAY"),o.a.createElement("button",{onClick:this.stopPlaying},"STOP")),o.a.createElement("div",{className:"meters"},o.a.createElement("input",{name:"bpm",type:"range",min:"40",max:"300",value:c,onChange:this.handleBpmChange}),o.a.createElement("label",{htmlFor:"bpm"},this.state.bpm," BPM")))}}]),t}(o.a.Component)),S=(a(38),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper page-wrapper--composerPage"},o.a.createElement("h1",{className:"composerPage-headline"},"COMPOSE"),o.a.createElement(O,null))}}]),t}(o.a.Component)),N=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper page-wrapper--settingsPage"},o.a.createElement("h2",{className:"composerPage-headline"},"SOUND SETTINGS"))}}]),t}(o.a.Component),j=a(18),k=(a(40),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={songTitle:"",composer:"",songList:[],songToLoad:"",loadedSong:""},a.handleFormChange=function(e){console.log(e.target,e.target.value),a.setState(Object(j.a)({},e.target.name,e.target.value))},a.clearFields=function(){a.setState({songTitle:"",composer:""})},a.submitSave=function(e){e.preventDefault();var t=a.state,n=t.songTitle,o=t.composer,r={songId:Date.now(),createdDate:new Date,songTitle:n,composer:o,drums:sessionStorage.getItem("drums")};console.log(r);var c=Object({NODE_ENV:"production",PUBLIC_URL:""}).WYT_SERVER_URL||"http://localhost:8080";console.log("TEST: ".concat(c,"/songs/")),fetch("".concat(c,"/songs/"),{headers:{"Content-Type":"application/json"},method:"Post",body:JSON.stringify(r)}).then(function(e){console.log("Request success: ",e),a.loadSongList(),a.clearFields()}).catch(function(e){console.log("Request failure: ",e),alert(e)})},a.submitLoad=function(e){e.preventDefault();var t=a.state.songToLoad;if(t){console.log("Loading song with id: ".concat(t,"..."));var n=Object({NODE_ENV:"production",PUBLIC_URL:""}).WYT_SERVER_URL||"http://localhost:8080";console.log("TEST: ".concat(n,"/").concat(t)),fetch("".concat(n,"/songs/").concat(t)).then(function(e){return e.json()}).then(function(e){a.setState({loadedSong:e},function(){return a.loadSongToSequenser()})})}else console.log("Choose a song to load...")},a.loadSongToSequenser=function(){var e=a.state.loadedSong;console.log("NEWLY LOADED SONG: ",e),console.table(JSON.parse(e.drums)),sessionStorage.setItem("drums",e.drums)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadSongList()}},{key:"loadSongList",value:function(){var e=this;console.log("Loading saved songlist...");var t=Object({NODE_ENV:"production",PUBLIC_URL:""}).WYT_SERVER_URL||"http://localhost:8080";console.log("TEST: ".concat(t,"/songs/")),fetch("".concat(t,"/songs/")).then(function(e){return e.json()}).then(function(t){e.setState({songList:t},function(){return console.log(e.state.songList)})})}},{key:"render",value:function(){var e=this.state,t=e.songTitle,a=e.composer,n=e.songList;return o.a.createElement("div",{className:"page-wrapper page-wrapper--saveLoadPage"},o.a.createElement("h2",{className:"composerPage-headline"},"SAVE & LOAD"),o.a.createElement("div",{className:"saveForm-container"},o.a.createElement("h2",null,"SAVE SONG"),o.a.createElement("form",{id:"postingForm",className:"postingForm",onSubmit:this.submitSave},o.a.createElement("input",{className:"formInput formInput__field",value:t,type:"text",placeholder:"Song Title",name:"songTitle",required:!0,onChange:this.handleFormChange}),o.a.createElement("input",{className:"formInput formInput__field",value:a,type:"text",placeholder:"Composer Name",name:"composer",required:!0,onChange:this.handleFormChange}),o.a.createElement("input",{className:"submitButton formInput__button",type:"submit",value:"Save"}))),o.a.createElement("div",{className:"loadForm-container"},o.a.createElement("h2",null,"LOAD SONG"),o.a.createElement("form",{id:"loadingForm",className:"loadingForm",onSubmit:this.submitLoad},o.a.createElement("select",{name:"songToLoad",className:"formInput formInput formInput__select",onChange:this.handleFormChange,size:"10"},n.map(function(e,t){return o.a.createElement("option",{key:t,value:e.songId},e.songTitle)})),o.a.createElement("input",{className:"submitButton formInput__button",type:"submit",value:"Load"}))))}}]),t}(o.a.Component)),C=(a(42),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper page-wrapper--404"},o.a.createElement("h1",null,"404"))}}]),t}(o.a.Component)),T=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(f,null),o.a.createElement(d.a,null,o.a.createElement(h.a,{exact:!0,path:"/",component:S}),o.a.createElement(h.a,{exact:!0,path:"/settings/",component:N}),o.a.createElement(h.a,{exact:!0,path:"/saveload/",component:k}),o.a.createElement(h.a,{component:C}))))}}]),t}(o.a.Component);a(47);c.a.render(o.a.createElement(T,null),document.getElementById("root"))}},[[21,2,1]]]);
//# sourceMappingURL=main.1c2010d1.chunk.js.map