(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(49)},32:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),s=n.n(r),c=n(3),l=n(4),i=n(6),u=n(5),m=n(7),p=n(51),h=n(53),d=n(52),g=n(50),f=(n(32),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"header-container"},o.a.createElement("h2",null,"WATCH YOUR TONE"),o.a.createElement("nav",{className:"nav-container"},o.a.createElement(g.a,{to:"/",className:"menuItem"},"COMPOSE"),o.a.createElement(g.a,{to:"/settings/",className:"menuItem"},"SETTINGS"),o.a.createElement(g.a,{to:"/saveload/",className:"menuItem"},"SAVE/LOAD")))}}]),t}(o.a.Component)),b=n(9),y=n.n(b),E=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("tr",{className:"seqInstrument-row"},this.props.bars.map(function(t,n){return o.a.createElement("td",{className:e.props.drumMatrix[e.props.drumIndex][n]?"beatBox beatBox--active":"beatBox",key:n,onClick:function(){return e.props.handleDrumClick(n)}})}))}}]),t}(o.a.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("tr",{className:"synthKey-row"},this.props.bars.map(function(t,n){return o.a.createElement("td",{className:e.props.synthKeyMatrix[e.props.synthKeyIndex][n]?"noteBox noteBox--active":"noteBox",key:n,onClick:function(){return e.props.handleNoteClick(n)}})}))}}]),t}(o.a.Component),S=(n(36),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={synth:[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]],drums:[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]],activeBar:0,resetTransport:!1,bpm:140,synthWaveForm:"triangle"},n.checkForActiveSession=function(){sessionStorage.getItem("drums")&&n.setState({drums:JSON.parse(sessionStorage.getItem("drums")),synth:JSON.parse(sessionStorage.getItem("synth"))})},n.startPlaying=function(){console.log("PLAYING"),y.a.Transport.start("+0.2")},n.stopPlaying=function(){console.log("STOPPED"),y.a.Transport.stop()},n.rewindPlaying=function(){console.log("Rewind"),n.setState({resetTransport:!0,activeBar:0})},n.handleDrumClick=function(e,t){var a=n.state.drums;a[e][t]=!n.state.drums[e][t],n.setState({drums:a},console.table(n.state.drums))},n.handleNoteClick=function(e,t){var a=n.state.synth;a[e][t]=!n.state.synth[e][t],n.setState({synth:a},console.table(n.state.synth))},n.handleBpmChange=function(e){n.setState({bpm:e.target.value},function(){console.log("STATE bpm: ",n.state.bpm),console.log("TRANSPORT bpm: ",y.a.Transport.bpm.value),y.a.Transport.bpm.rampTo(n.state.bpm,.2)})},n.clearMatrix=function(){console.log("Cleared sequenser..."),n.setState({synth:[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]],drums:[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]]}),sessionStorage.removeItem("drums"),sessionStorage.removeItem("synth")},n.soundGenerator=function(){var e=new y.a.Freeverb(.05,15e3).toMaster(),t=new y.a.Gain(.6);t.connect(e);var a=[new y.a.MembraneSynth,new y.a.NoiseSynth({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:.05,release:.2}}),new y.a.MetalSynth({frequency:200,envelope:{attack:.001,decay:.05,release:.05},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5})];a.forEach(function(e){return e.connect(t)}),a[0].oscillator.type="sine";for(var o=[],r=0;r<n.state.synth[0].length;r++)o.push(new y.a.Synth);console.log("Synths: ",o),o.forEach(function(e){return e.connect(t)});var s=0,c=["C1","C2","C4"],l=["C5","B4","A4","G4","F4","E4","D4","C4"];y.a.Transport.bpm.value=n.state.bpm,y.a.context.latencyHint="fastest",y.a.Transport.scheduleRepeat(function(e){n.state.resetTransport&&(s=0,n.setState({resetTransport:!1,activeBar:0}));var t=s%16;n.setState({activeBar:t});for(var r=0;r<n.state.drums.length;r++){if(n.state.drums[r][t])switch(r){case 1:a[r].triggerAttackRelease("16n");break;case 2:a[r].triggerAttackRelease("16n",e,.6);break;default:a[r].triggerAttackRelease(c[r],"8n",e)}for(var i=0;i<n.state.synth.length;i++)n.state.synth[i][t]&&(o[i].oscillator.type=n.state.synthWaveForm,o[i].triggerAttackRelease(l[i],"8n",e))}s++},"8n")},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){y.a.Transport.cancel(),this.soundGenerator(),this.checkForActiveSession()}},{key:"componentWillUnmount",value:function(){y.a.Transport.stop(),sessionStorage.setItem("drums",JSON.stringify(this.state.drums)),sessionStorage.setItem("synth",JSON.stringify(this.state.synth))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.blackKeys,t.synth),a=t.drums,r=t.activeBar,s=t.bpm;return o.a.createElement("div",{className:"sequenser-container"},o.a.createElement("h3",null,"SEQUENSER"),o.a.createElement("div",{className:"synth-container"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,n[0].map(function(e,t){return o.a.createElement("th",{key:t,className:t===r?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),o.a.createElement("tbody",null,n.map(function(t,a){return o.a.createElement(v,{key:a,synthKeyIndex:a,bars:n[a],synthKeyMatrix:n,handleNoteClick:function(t){return e.handleNoteClick(a,t)}})})))),o.a.createElement("div",{className:"drums-container"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,a[0].map(function(e,t){return o.a.createElement("th",{key:t,className:t===r?"barIndicator barIndicator--active":"barIndicator"},t+1)}))),o.a.createElement("tbody",null,a.map(function(t,n){return o.a.createElement(E,{key:n,drumIndex:n,bars:a[n],drumMatrix:a,handleDrumClick:function(t){return e.handleDrumClick(n,t)}})})))),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.startPlaying},"PLAY \u25b6"),o.a.createElement("button",{onClick:this.stopPlaying},"STOP \u25a0"),o.a.createElement("button",{onClick:this.rewindPlaying},"REWIND \u25c0\u25c0"),o.a.createElement("button",{onClick:this.clearMatrix},"CLEAR")),o.a.createElement("div",{className:"meters"},o.a.createElement("input",{name:"bpm",type:"range",min:"40",max:"300",value:s,onChange:this.handleBpmChange}),o.a.createElement("label",{htmlFor:"bpm"},this.state.bpm," BPM")))}}]),t}(o.a.Component)),O=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper page-wrapper--settingsPage"},o.a.createElement("h2",{className:"composerPage-headline"},"SOUND SETTINGS"))}}]),t}(o.a.Component),N=n(18),j=(n(38),"https://watchyourtone.herokuapp.com"),k=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={songTitle:"",composer:"",songList:[],songToLoad:"",loadedSong:""},n.handleFormChange=function(e){console.log(e.target,e.target.value),n.setState(Object(N.a)({},e.target.name,e.target.value))},n.clearFields=function(){n.setState({songTitle:"",composer:""})},n.submitSave=function(e){e.preventDefault();var t=n.state,a=t.songTitle,o=t.composer,r={songId:Date.now(),createdDate:new Date,songTitle:a,composer:o,drums:sessionStorage.getItem("drums"),synth:sessionStorage.getItem("synth")};console.log(r),console.log("TEST: ".concat(j,"/songs/")),fetch("".concat(j,"/songs/"),{headers:{"Content-Type":"application/json"},method:"Post",body:JSON.stringify(r)}).then(function(e){console.log("Request success: ",e),n.loadSongList(),n.clearFields()}).catch(function(e){console.log("Request failure: ",e),alert(e)})},n.submitLoad=function(e){e.preventDefault();var t=n.state.songToLoad;if(t){console.log("Loading song with id: ".concat(t,"..."));Object({NODE_ENV:"production",PUBLIC_URL:""}).WYT_SERVER_URL;console.log("TEST: ".concat(j,"/songs/").concat(t)),fetch("".concat(j,"/songs/").concat(t)).then(function(e){return e.json()}).then(function(e){n.setState({loadedSong:e},function(){return n.loadSongToSequenser()})})}else console.log("Choose a song to load...")},n.loadSongToSequenser=function(){var e=n.state.loadedSong;console.log("NEWLY LOADED SONG: ",e),console.table(JSON.parse(e.drums)),console.table(JSON.parse(e.synth)),sessionStorage.setItem("drums",e.drums),sessionStorage.setItem("synth",e.synth)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadSongList()}},{key:"loadSongList",value:function(){var e=this;console.log("Loading saved songlist..."),console.log("TEST: ".concat(j,"/songs/")),fetch("".concat(j,"/songs/")).then(function(e){return e.json()}).then(function(t){e.setState({songList:t},function(){return console.log(e.state.songList)})})}},{key:"render",value:function(){var e=this.state,t=e.songTitle,n=e.composer,a=e.songList;return o.a.createElement("div",{className:"page-wrapper page-wrapper--saveLoadPage"},o.a.createElement("h2",{className:"composerPage-headline"},"SAVE & LOAD"),o.a.createElement("div",{className:"saveForm-container"},o.a.createElement("h2",null,"SAVE SONG"),o.a.createElement("form",{id:"postingForm",className:"postingForm",onSubmit:this.submitSave},o.a.createElement("input",{className:"formInput formInput__field",value:t,type:"text",placeholder:"Song Title",name:"songTitle",required:!0,onChange:this.handleFormChange}),o.a.createElement("input",{className:"formInput formInput__field",value:n,type:"text",placeholder:"Composer Name",name:"composer",required:!0,onChange:this.handleFormChange}),o.a.createElement("input",{className:"submitButton formInput__button",type:"submit",value:"Save"}))),o.a.createElement("div",{className:"loadForm-container"},o.a.createElement("h2",null,"LOAD SONG"),o.a.createElement("form",{id:"loadingForm",className:"loadingForm",onSubmit:this.submitLoad},o.a.createElement("select",{name:"songToLoad",className:"formInput formInput formInput__select",onChange:this.handleFormChange,size:"10"},a.map(function(e,t){return o.a.createElement("option",{key:t,value:e.songId},e.songTitle)})),o.a.createElement("input",{className:"submitButton formInput__button",type:"submit",value:"Load"}))))}}]),t}(o.a.Component),C=(n(40),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper page-wrapper--composerPage"},o.a.createElement("h1",{className:"composerPage-headline"},"COMPOSE"),o.a.createElement(S,null),o.a.createElement(O,null),o.a.createElement(k,null))}}]),t}(o.a.Component)),T=(n(42),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"page-wrapper page-wrapper--404"},o.a.createElement("h1",null,"404"))}}]),t}(o.a.Component)),I=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(f,null),o.a.createElement(h.a,null,o.a.createElement(d.a,{exact:!0,path:"/",component:C}),o.a.createElement(d.a,{component:T}))))}}]),t}(o.a.Component);n(47);s.a.render(o.a.createElement(I,null),document.getElementById("root"))}},[[21,2,1]]]);
//# sourceMappingURL=main.431677c7.chunk.js.map